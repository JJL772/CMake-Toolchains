set(CMAKE_CROSSCOMPILING ON)

set(CMAKE_SYSTEM_NAME Windows)
set(CMAKE_SYSTEM_PROCESSOR "x86_64")
set(CMAKE_EXECUTALE_FORMAT "ELF")

set(CMAKE_ASM_COMPILER	"x86_64-w64-mingw32-as")
set(CMAKE_C_COMPILER 	"x86_64-w64-mingw32-gcc")
set(CMAKE_CXX_COMPILER 	"x86_64-w64-mingw32-g++")
set(CMAKE_LINKER 		"x86_64-w64-mingw32-ld")
set(CMAKE_STRIP 		"x86_64-w64-mingw32-strip")
set(CMAKE_OBJDUMP 		"x86_64-w64-mingw32-objdump")
set(CMAKE_OBJCOPY 		"x86_64-w64-mingw32-objcopy")
set(CMAKE_NM 			"x86_64-w64-mingw32-nm")
set(CMAKE_RANLIB 		"x86_64-w64-mingw32-ranlib")
set(CMAKE_AR 			"x86_64-w64-mingw32-ar")

set(FLAGS "-D_x64_ -D_X64_ -D_AMD64_ -DWIN32 -DWINDOWS -DWIN64 -D_WIN32 -m64")
set(INCDIRS	"-I${MINGW_ROOT}/include")

set(CMAKE_ASM_FLAGS 			"${CMAKE_ASM_FLAGS} ${INCDIRS} ${FLAGS}")
set(CMAKE_C_FLAGS				"${CMAKE_C_FLAGS} ${FLAGS} ${INCDIRS} -std=c99" CACHE "C Flags")
set(CMAKE_CXX_FLAGS				"${CMAKE_CXX_FLAGS} ${FLAGS} ${INCDIRS} -std=c++17" CACHE "C++ Flags")
set(CMAKE_EXE_LINKER_FLAGS 		"${CMAKE_EXE_LINKER_FLAGS} ${FLAGS}" CACHE INTERNAL "EXE Linker Flags")
set(CMAKE_SHARED_LINKER_FLAGS 	"${CMAKE_SHARED_LINKER_FLAGS} ${FLAGS}" CACHE INTERNAL "Shared Linker Flags")
set(CMAKE_MODULE_LINKER_FLAGS 	"${CMAKE_MODULE_LINKER_FLAGS} ${FLAGS}" CACHE INTERNAL "Module Linker Flags")

if(DEFINED LINKER_SCRIPT)
	set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -T ${LINKER_SCRIPT}" CACHE INTERNAL "EXE Linker Flags")
	set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -T ${LINKER_SCRIPT}" CACHE INTERNAL "Shared Linker Flags")
	set(CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULE_LINKER_FLAGS} -T ${LINKER_SCRIPT}" CACHE INTERNAL "Module Linker Flags")
endif(DEFINED LINKER_SCRIPT)